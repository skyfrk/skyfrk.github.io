{"componentChunkName":"component---src-templates-blog-post-jsx","path":"/blog/2019/connecting-the-digital-worlds-2/","result":{"data":{"markdownRemark":{"html":"<p>In the <a href=\"/blog/2019/connecting-the-digital-worlds-1\">previous article</a> we clarified the idea of the challenge and set up a demo machine. In this article we take on the implementation of the first route of events in the tapio-IFTTT-Connector: From IFTTT to tapio-ready machines.</p>\n<p>This article was originally written for <a href=\"https://www.tapio.one/\">tapio</a>. You can read it <a href=\"https://www.tapio.one/en/blog/connecting-the-digital-worlds-part-2\">here</a>.</p>\n<ul>\n<li><a href=\"/blog/2019/connecting-the-digital-worlds-1\">Connecting the digital worlds (1/3)</a></li>\n<li><a href=\"/blog/2019/connecting-the-digital-worlds-2\">Connecting the digital worlds (2/3)</a></li>\n<li><a href=\"/blog/2019/connecting-the-digital-worlds-3\">Connecting the digital worlds (3/3)</a></li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/fa1779f94a1cedc853c50e98b887e823/a0730/tapio-ifttt-sequence-from-ifttt.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.500000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsSAAALEgHS3X78AAABbklEQVQY0yXMzS/DYADH8SfGxcEc/AcSLhIHDo4Sd/+Ei4OLg4MLDtti1U1SV2IRsgiZhUWCEKfOBDEvWVtvsbaq22xPX7TV53n6qPjmd/38QEupfDxfvt1ftJTHr+qdXrmRhWJGzM1W1+ffN9JKNi1k4uL6jJzh1O2YurkjHRjVe+Xlqv5SBhas2VB3jIYFdaOuGprqwNrE52avwQ5Y3BDkhiE3aHL9xvJIc6WvzszJOaR/1pRXqKuAhgX0P4IIdn/Itz+qrwJrIWLGgZsAKAlwEgRM+w8D7LnJxh71KCIkVH84QNh1nAATp2XajSZ10ZixAfxYxF8CiAF4CQTh2A7MAhqfco8oojikIXZM6NuGa0Lk2uF8y6S+N25vtZHFaJCOklQ3TnWRVCdhe9AyIIlpqxC++8TDvgfUx5ImFTXxWnsqqRVeKfOKwJ/eFraE3ayYOxH3j6WDvJhfE3bOpEJBzJ+XD1WB154u5YfiL25uE5d+nBt+AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Sequence diagram\"\n        title=\"Sequence diagram\"\n        src=\"/static/fa1779f94a1cedc853c50e98b887e823/5a190/tapio-ifttt-sequence-from-ifttt.png\"\n        srcset=\"/static/fa1779f94a1cedc853c50e98b887e823/772e8/tapio-ifttt-sequence-from-ifttt.png 200w,\n/static/fa1779f94a1cedc853c50e98b887e823/e17e5/tapio-ifttt-sequence-from-ifttt.png 400w,\n/static/fa1779f94a1cedc853c50e98b887e823/5a190/tapio-ifttt-sequence-from-ifttt.png 800w,\n/static/fa1779f94a1cedc853c50e98b887e823/a0730/tapio-ifttt-sequence-from-ifttt.png 1131w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>As <a href=\"/blog/2019/connecting-the-digital-worlds-1\">previously specified</a> we want to use the IFTTT Webhook service so that when an applet using the Webhook service is triggered we will receive a HTTP request at the endpoint specified in the applet. We then want to process the request and forward the event to the machine using <a href=\"https://developer.tapio.one/docs/Commanding.html\">tapios Commanding API</a>. The Commanding API is typically used to interact with <a href=\"https://opcfoundation.org/about/opc-technologies/opc-ua/\">OPC UA</a> servers running on tapio-ready machines.</p>\n<p>When we recognized that our tapio-IFTTT-Connector simply has to receive a HTTP request, then process it and finally make another HTTP request we opted for a <a href=\"https://martinfowler.com/articles/serverless.html\">serverless</a> implementation approach. As you can tell by its name there are no servers in a serverless architecture but rather snippets of code which execute on certain conditions. Of course these snippets still run on a server but not on our servers. This way we can safe money because we don't have to operate or rent a server 24/7 and in addition we don't have to worry about setting up a server, installing a runtime environment etc. There are multiple products available for implementing serverless architectures. We picked <a href=\"https://azure.microsoft.com/en-us/services/functions/\">Azure Functions</a> from Microsofts cloud platform Azure.</p>\n<p>When we started coding the desire for proper debugging arised rather quickly. So how does one debug an Azure Function? We can't simply establish a debugging session to our deployed function. Instead we have to run the Azure Function locally and forward the HTTP requests from IFTTT to our local machine and this is where <a href=\"https://ngrok.com/\">ngrok</a> came in handy.</p>\n<p>With <a href=\"https://ngrok.com/\">ngrok</a> we're able to expose a local server behind a NAT or firewall to the internet and therefore IFTTT and it's dead simple:</p>\n<p>We only have to register on <a href=\"https://ngrok.com/\">ngrok.com</a>, download the executable and create ourselves an authentication token (replace <code class=\"language-text\">some_token</code> with the key provided for our account on <a href=\"https://ngrok.com/\">ngrok.com</a>).</p>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\"><span class=\"token function\">PS</span> C:\\Program Files\\ngrok> <span class=\"token punctuation\">.</span><span class=\"token operator\">/</span>ngrok authtoken some_token\nAuthtoken saved to configuration file: C:\\Users\\Simon<span class=\"token operator\">/</span><span class=\"token punctuation\">.</span>ngrok2<span class=\"token operator\">/</span>ngrok<span class=\"token punctuation\">.</span>yml</code></pre></div>\n<p>Now we're already able to expose a local port. In the example below we're exposing the local port our Azure Function is using:</p>\n<div class=\"gatsby-highlight\" data-language=\"powershell\"><pre class=\"language-powershell\"><code class=\"language-powershell\"><span class=\"token function\">PS</span> C:\\Program Files\\ngrok> <span class=\"token punctuation\">.</span><span class=\"token operator\">/</span>ngrok http 1337</code></pre></div>\n<p>After running the above we're given a monitor screen in our terminal. Behind the <code class=\"language-text\">Forwarding</code> keyword we can see active tunnels. In our example below our local Azure Function is now exposed behind <code class=\"language-text\">http://qyt7q40w03.ngrok.io</code>. We can verify if everything is working correctly by opening the ngrok URL in our web browser (sending a GET request). As we can see at the bottom of the output a GET request was logged as expected. It works! If you'd like to have a deeper look in incoming requests you can explore ngroks web interface running locally on port <code class=\"language-text\">4040</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"command-line-prompt\"><span data-user=user data-host=machine></span><span data-user=user data-host=machine></span><span data-user=user data-host=machine></span><span data-user=user data-host=machine></span><span data-user=user data-host=machine></span><span data-user=user data-host=machine></span><span data-user=user data-host=machine></span><span data-user=user data-host=machine></span><span data-user=user data-host=machine></span><span data-user=user data-host=machine></span><span data-user=user data-host=machine></span><span data-user=user data-host=machine></span><span data-user=user data-host=machine></span><span data-user=user data-host=machine></span><span data-user=user data-host=machine></span><span data-user=user data-host=machine></span><span data-user=user data-host=machine></span></span>ngrok by @inconshreveable                               <span class=\"token punctuation\">(</span>Ctrl+C to quit<span class=\"token punctuation\">)</span>\n\nSession Status      online\nAccount             <span class=\"token punctuation\">(</span>Plan: Free<span class=\"token punctuation\">)</span>\nVersion             <span class=\"token number\">2.3</span>.30\nRegion              United States <span class=\"token punctuation\">(</span>us<span class=\"token punctuation\">)</span>\nWeb Interface       http://127.0.0.1:4040\nForwarding          http://qyt7q40w03.ngrok.io -<span class=\"token operator\">></span> http://localhost:1337\nForwarding          https://qyt7q40w03.ngrok.io -<span class=\"token operator\">></span> http://localhost:1337\n\nConnections         ttl     opn     rt1     rt5     p50     p90\n                    <span class=\"token number\">2</span>       <span class=\"token number\">0</span>       <span class=\"token number\">0.01</span>    <span class=\"token number\">0.01</span>    <span class=\"token number\">2.31</span>    <span class=\"token number\">2.31</span>\n\nHTTP Requests\n-------------\n\nGET /WebhookProcessorFunction               <span class=\"token number\">200</span> OK</code></pre></div>\n<p>To actually develop and debug with real HTTP requests from IFTTT we have to create an applet with a trigger under our control and an action which sends HTTP requests to our local Azure Function exposed through ngrok. Therefore we create an applet which sends a POST request into our ngrok tunnel when we press a button on our smartphone:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7b415d33603fc1126000e3882ac40458/2a50c/applet-config.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 112.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAYAAAALHW+jAAAACXBIWXMAAC4jAAAuIwF4pT92AAAEqUlEQVQ4y1VVWUycVRT+Z1hm2JGlhRZaoBVbEKttbY3bgzExaVL1UYxv+uK7D4WyllqoUBLDTplhRwYKVZNqTTRqbGLLMkCBQisqwR+XMMUlgWJn7vk85/7D4iRfzv/P3Pvd73znnDuGvRWB+HYgygUKuwxEu4FIFxDRpiM5ORrNIFsLFjkGjBZ+bwHxM4LP+ndZ/0g7f+/kzac+Az37MZDRCzz/CZA7AJwYBl74FJTdzxuaNOGy0QiV/xVw8ipvbABsm4RNQGIH6OBH/BzSCkpnovQeUFqPRSoQosf6QXu6gdBWTWDu64W64AUKboHCL2tl2FLMpHwgGZKmKBIcGQTyOCZ16BOxuwvEQEgr8QYy49qhZN0hDxELYULaTFlHrdjBufPJ+sUCWQv0YtlICBPCRphJnaROfQ48MchKGmk75Z1+ikLJXfAop5nDCnI8hH19QAIrNFgJryEmN3mDOtz3L3I9iqSQ/B24qLC30LYQ9gd72bv9TJDB2N9LiOBCvfPlA1R89ycVfbOKN65vaA+dbaT2diu2hLRCo57BxTHqFfun9AGGnWUmdwLsD5I4xreTmIuTA+t4dchHrw358Mzghphusg1KDn16mOjJq+z3FeCwR+Eox8xeq9pGKKcs1Y1xB71otlIQUl01UdAgkczsflKrG+APkbm0hPW1v+UFI3814+LCi8gbZJVSfjYZh/p1czNIN3aMmxDtIkrsIOzqpK22GV8BltdAYz/7MLeyht/XgWu/DqFg+m1kBftQ2gNZfRZhpGuTWE8LSfukdMtkcFEaAsrWFECcy0+JYo8c2vYQKbwmTiaqQVlFEV92dW31nvZU/JQ+jGHFdqly7aoZUjyhos/PIqpilsLKpuE4N4PIilkYRZMML2wlUzCkl2QOQ3X5g8Zuw6qmTMolnxlS8L1KrZxEWuUExZaNI7JkDFGlY7AXjsAoCEL6MMdj9V/e4P/TlstBeylDX+MzHUUjKqtmBpnVtym1cgrhxeN4/MNZPNc8j6fq7yCqzGulLPPKc6tNFTKZHrllpKGlKGl9FmFo4S2VcH5SiMgoGIUgtGgMkaVeOEvGYSscs4oihOJb9I6CBEFSdYfbStl25qYKL/YiomScGBI1kXFm1IIcIoTS1LoHm4IzvBmbiXQUD6tXzKRzY+r1nh9xuusHeqntLl5x38NRTlUTiTqBpHeEOz2120rXqS9WknRlTvXl4HBZKUcVj6gU9k48TLs4hQM104gr91rqNOGo5aFcDFIYaZkE9kymJrNXySVBuXxRHPCIQp8ZwUXZfWEKBy9NU8YHt5FWNWWlvFOhEKb3kPYwuZM0oVHHl8MX/6DuxjI13VjCu1/zLFfdN5PKR1V27QxXdoaOcap7WG2QiLYi9yFZ/yFk3dy91mwL4t2KRy6w2Ye/OM6OPIwtnwhwe/hjywUTflboZ4XbkPvMqCN6+Rrw02/3cXNmAaPzi7izsIjri379x8WEylbr+8MomYZRNs+Ys1A6B+f7d5FYvYDkmgXEVt3Tk+KXCnPL0PEhwvEhhWOME8OKLwxd5YDBXWBveDBgf+/b08ZZ71vcb/k7wanmhxWNv8lq8/8Dn0O3nYQfKB0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Applet config\"\n        title=\"Applet config\"\n        src=\"/static/7b415d33603fc1126000e3882ac40458/5a190/applet-config.png\"\n        srcset=\"/static/7b415d33603fc1126000e3882ac40458/772e8/applet-config.png 200w,\n/static/7b415d33603fc1126000e3882ac40458/e17e5/applet-config.png 400w,\n/static/7b415d33603fc1126000e3882ac40458/5a190/applet-config.png 800w,\n/static/7b415d33603fc1126000e3882ac40458/2a50c/applet-config.png 925w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>Due to our limited time frame we opted for a plain text body with a simple event name to lower complexity. Further down the line one could however transmit full blown JSON objects.</p>\n<p>Now for the good stuff: The implementation of the Azure Function. The code below basically waits for GET or POST requests, parses the body of the request, interprets it as event and then forwards it to our machine using the Commanding API.</p>\n<p>The Commanding API is normally used to alter item values or call methods on a OPC UA server associated with the CloudConnector but we figured we can use an item write request as well to transmit an event. On OPC UA server side we then just have to wait for item state changes and interpret them as events.</p>\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\"><span class=\"token punctuation\">[</span><span class=\"token attribute\"><span class=\"token class-name\">FunctionName</span><span class=\"token attribute-arguments\"><span class=\"token punctuation\">(</span><span class=\"token string\">\"WebhookProcessorFunction\"</span><span class=\"token punctuation\">)</span></span></span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">async</span> <span class=\"token return-type class-name\">Task<span class=\"token punctuation\">&lt;</span>IActionResult<span class=\"token punctuation\">></span></span> <span class=\"token function\">Run</span><span class=\"token punctuation\">(</span>\n    <span class=\"token punctuation\">[</span><span class=\"token attribute\"><span class=\"token class-name\">HttpTrigger</span><span class=\"token attribute-arguments\"><span class=\"token punctuation\">(</span>AuthorizationLevel<span class=\"token punctuation\">.</span>Function<span class=\"token punctuation\">,</span> <span class=\"token string\">\"get\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"post\"</span><span class=\"token punctuation\">,</span> Route <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span></span></span><span class=\"token punctuation\">]</span> <span class=\"token class-name\">HttpRequest</span> req<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Microsoft<span class=\"token punctuation\">.</span>Azure<span class=\"token punctuation\">.</span>WebJobs<span class=\"token punctuation\">.</span>ExecutionContext</span> context<span class=\"token punctuation\">,</span> <span class=\"token class-name\">CancellationToken</span> cancellationToken<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\"><span class=\"token keyword\">var</span></span> eventName <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">StreamReader</span><span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">.</span>Body<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">ReadToEndAsync</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\"><span class=\"token keyword\">var</span></span> processedEvent <span class=\"token operator\">=</span> JsonConvert<span class=\"token punctuation\">.</span><span class=\"token function\">SerializeObject</span><span class=\"token punctuation\">(</span>EventFactory<span class=\"token punctuation\">.</span><span class=\"token function\">Create</span><span class=\"token punctuation\">(</span>eventName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">await</span> <span class=\"token function\">CallCommandAsync</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">Command</span>\n    <span class=\"token punctuation\">{</span>\n        CommandType <span class=\"token operator\">=</span> <span class=\"token string\">\"itemWrite\"</span><span class=\"token punctuation\">,</span>\n        Id <span class=\"token operator\">=</span> <span class=\"token string\">\"ProcessEvent\"</span><span class=\"token punctuation\">,</span>\n        ServerId <span class=\"token operator\">=</span> Config<span class=\"token punctuation\">[</span><span class=\"token string\">\"ServerId\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        TapioMachineId <span class=\"token operator\">=</span> Config<span class=\"token punctuation\">[</span><span class=\"token string\">\"TapioMachineId\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n        Arguments <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">Dictionary<span class=\"token punctuation\">&lt;</span><span class=\"token keyword\">string</span><span class=\"token punctuation\">,</span> CommandArgument<span class=\"token punctuation\">></span></span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token punctuation\">{</span> <span class=\"token string\">\"value\"</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">CommandArgument</span>\n                <span class=\"token punctuation\">{</span>\n                 Value <span class=\"token operator\">=</span> processedEvent <span class=\"token punctuation\">,</span> ValueType <span class=\"token operator\">=</span> <span class=\"token string\">\"String\"</span>\n                <span class=\"token punctuation\">}</span>\n            <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> cancellationToken<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">OkObjectResult</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"The command was processed successfully\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>The <code class=\"language-text\">EventFactory</code> class is responsible for mapping event data from IFTTT to our generic event model:</p>\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Event</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token punctuation\">[</span><span class=\"token attribute\"><span class=\"token class-name\">JsonProperty</span><span class=\"token attribute-arguments\"><span class=\"token punctuation\">(</span><span class=\"token string\">\"name\"</span><span class=\"token punctuation\">)</span></span></span><span class=\"token punctuation\">]</span>\n    <span class=\"token keyword\">public</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">string</span></span> Name <span class=\"token punctuation\">{</span> <span class=\"token keyword\">get</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">set</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">[</span><span class=\"token attribute\"><span class=\"token class-name\">JsonProperty</span><span class=\"token attribute-arguments\"><span class=\"token punctuation\">(</span><span class=\"token string\">\"payload\"</span><span class=\"token punctuation\">)</span></span></span><span class=\"token punctuation\">]</span>\n    <span class=\"token keyword\">public</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">string</span></span> Payload <span class=\"token punctuation\">{</span> <span class=\"token keyword\">get</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">set</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Due to time constraints we didn't finish the implementation of the support for events with payload. However being able to transmit any payload would for example enable an IFTTT user to transmit complex statements like <a href=\"https://www.youtube.com/watch?v=lx_vWkv50uk\">these :)</a> to his machine.</p>\n<p>If we tried to test our system at this point events wouldn't reach their target machine because we didn't modify the tapio CloudConnector XML configuration of the machine yet. By default we can't access any OPC UA node through Commanding API for security reasons until we configure the access in the configuration file.</p>\n<p>In the example below we extend the configuration of <code class=\"language-text\">DataModule01</code> with our OPC UA event processor server <code class=\"language-text\">SensorServer</code> which has an item write command configured: <code class=\"language-text\">ProcessEvent</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\">...\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Module</span> <span class=\"token attr-name\"><span class=\"token namespace\">xsi:</span>type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>DataModuleConfig<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Id</span><span class=\"token punctuation\">></span></span>DataModule01<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Id</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Source</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Servers</span><span class=\"token punctuation\">></span></span>\n          ...\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>SourceBase</span> <span class=\"token attr-name\"><span class=\"token namespace\">xsi:</span>type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>SourceOpcUa<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Id</span><span class=\"token punctuation\">></span></span>SensorServer<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Id</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>OpcServer</span><span class=\"token punctuation\">></span></span>opc.tcp://localhost:420<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>OpcUaServer</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Commanding</span><span class=\"token punctuation\">></span></span>\n              <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Commands</span><span class=\"token punctuation\">></span></span>\n                  ...\n                  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Command</span> <span class=\"token attr-name\"><span class=\"token namespace\">xsi:</span>type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>CommandItemWrite<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n                    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Id</span><span class=\"token punctuation\">></span></span>ProcessEvent<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Id</span><span class=\"token punctuation\">></span></span>\n                    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>TapioMachineId</span><span class=\"token punctuation\">></span></span>741ab3a2-040a-44bf-b8ce-4333d567a99a<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>TapioMachineId</span><span class=\"token punctuation\">></span></span>\n                    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>NodeId</span><span class=\"token punctuation\">></span></span>ns=2;s=PiSensorServer.ProcessEventCommandState<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>NodeId</span><span class=\"token punctuation\">></span></span>\n                  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Command</span><span class=\"token punctuation\">></span></span>\n                  ...\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Commands</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Commanding</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>Groups</span><span class=\"token punctuation\">></span></span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>SourceBase</span><span class=\"token punctuation\">></span></span>\n          ...\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Servers</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Source</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>Module</span><span class=\"token punctuation\">></span></span>\n...</code></pre></div>\n<p>Now we're almost good to go. Events will now be forwarded to the OPC UA server running on our demo machine. But this server still lacks the configured node and the logic behind it.</p>\n<p>So lets add a <code class=\"language-text\">DataVariableState</code> node of type <code class=\"language-text\">String</code> to the address space of our OPC UA server. To also be able to process incoming events we have to be able to react to every single status change. We implemented that by attaching a custom event handler to the <code class=\"language-text\">WriteCalled</code> event of our node:</p>\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\"><span class=\"token keyword\">protected</span> <span class=\"token keyword\">override</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">void</span></span> <span class=\"token function\">CreateAddressSpace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">base</span><span class=\"token punctuation\">.</span><span class=\"token function\">CreateAddressSpace</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    _ProcessEventCommandDataVariableState <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">DataVariableState</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"ProcessEventCommandState\"</span><span class=\"token punctuation\">,</span> RootFolder<span class=\"token punctuation\">,</span> SystemContextObject<span class=\"token punctuation\">,</span> <span class=\"token keyword\">typeof</span><span class=\"token punctuation\">(</span><span class=\"token type-expression class-name\"><span class=\"token keyword\">string</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    _ProcessEventCommandDataVariableState<span class=\"token punctuation\">.</span>WriteCalled <span class=\"token operator\">+=</span> OnProcessEventCommandWrite<span class=\"token punctuation\">;</span>\n\n    <span class=\"token function\">AddNode</span><span class=\"token punctuation\">(</span>_ProcessEventCommandDataVariableState<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>In order to physically show that our demo machine has received an event we want to flash the LED attached to our demo machine in different ways. Therefore we have to implement an abstraction layer to control the LED connected through the GPIO interface of our demo machine.</p>\n<p>So we have to define an interface for a LED to abstract the GPIO logic and create another one for a LED controller which is additionally capable of processing light sequences:</p>\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">ILedController</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token return-type class-name\">Task</span> <span class=\"token function\">ProcessSequence</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">LedSequence</span> ledSequence<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token return-type class-name\"><span class=\"token keyword\">void</span></span> <span class=\"token function\">SetColor</span><span class=\"token punctuation\">(</span><span class=\"token class-name\"><span class=\"token keyword\">int</span></span> red<span class=\"token punctuation\">,</span> <span class=\"token class-name\"><span class=\"token keyword\">int</span></span> green<span class=\"token punctuation\">,</span> <span class=\"token class-name\"><span class=\"token keyword\">int</span></span> blue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">ILed</span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token return-type class-name\"><span class=\"token keyword\">void</span></span> <span class=\"token function\">SetColor</span><span class=\"token punctuation\">(</span><span class=\"token class-name\"><span class=\"token keyword\">int</span></span> red<span class=\"token punctuation\">,</span> <span class=\"token class-name\"><span class=\"token keyword\">int</span></span> green<span class=\"token punctuation\">,</span> <span class=\"token class-name\"><span class=\"token keyword\">int</span></span> blue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Now we have to implement the LED interface using the <a href=\"https://github.com/unosquare/raspberryio\">Unosquare.RaspberryIO</a> NuGet package:</p>\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Led</span> <span class=\"token punctuation\">:</span> <span class=\"token type-list\"><span class=\"token class-name\">ILed</span></span>\n<span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">const</span> <span class=\"token class-name\"><span class=\"token keyword\">int</span></span> _MaxColorValue <span class=\"token operator\">=</span> <span class=\"token number\">255</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">GpioPin</span> _RedPin<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">GpioPin</span> _BluePin<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">GpioPin</span> _GreenPin<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token function\">Led</span><span class=\"token punctuation\">(</span><span class=\"token class-name\"><span class=\"token keyword\">int</span></span> redBcm<span class=\"token punctuation\">,</span> <span class=\"token class-name\"><span class=\"token keyword\">int</span></span> greenBcm<span class=\"token punctuation\">,</span> <span class=\"token class-name\"><span class=\"token keyword\">int</span></span> blueBcm<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        Pi<span class=\"token punctuation\">.</span><span class=\"token generic-method\"><span class=\"token function\">Init</span><span class=\"token generic class-name\"><span class=\"token punctuation\">&lt;</span>BootstrapWiringPi<span class=\"token punctuation\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        _RedPin <span class=\"token operator\">=</span> <span class=\"token function\">InitializeGpioPin</span><span class=\"token punctuation\">(</span>redBcm<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        _GreenPin <span class=\"token operator\">=</span> <span class=\"token function\">InitializeGpioPin</span><span class=\"token punctuation\">(</span>greenBcm<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        _BluePin <span class=\"token operator\">=</span> <span class=\"token function\">InitializeGpioPin</span><span class=\"token punctuation\">(</span>blueBcm<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">void</span></span> <span class=\"token function\">SetColor</span><span class=\"token punctuation\">(</span><span class=\"token class-name\"><span class=\"token keyword\">int</span></span> red<span class=\"token punctuation\">,</span> <span class=\"token class-name\"><span class=\"token keyword\">int</span></span> green<span class=\"token punctuation\">,</span> <span class=\"token class-name\"><span class=\"token keyword\">int</span></span> blue<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">CheckColorRange</span><span class=\"token punctuation\">(</span>red<span class=\"token punctuation\">,</span> <span class=\"token keyword\">nameof</span><span class=\"token punctuation\">(</span>red<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">CheckColorRange</span><span class=\"token punctuation\">(</span>green<span class=\"token punctuation\">,</span> <span class=\"token keyword\">nameof</span><span class=\"token punctuation\">(</span>green<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">CheckColorRange</span><span class=\"token punctuation\">(</span>blue<span class=\"token punctuation\">,</span> <span class=\"token keyword\">nameof</span><span class=\"token punctuation\">(</span>blue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        _RedPin<span class=\"token punctuation\">.</span>SoftPwmValue <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span> red <span class=\"token operator\">/</span> _MaxColorValue <span class=\"token operator\">*</span> <span class=\"token number\">100</span><span class=\"token punctuation\">;</span>\n        _GreenPin<span class=\"token punctuation\">.</span>SoftPwmValue <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span> green <span class=\"token operator\">/</span> _MaxColorValue <span class=\"token operator\">*</span> <span class=\"token number\">100</span><span class=\"token punctuation\">;</span>\n        _BluePin<span class=\"token punctuation\">.</span>SoftPwmValue <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token punctuation\">)</span> blue <span class=\"token operator\">/</span> _MaxColorValue <span class=\"token operator\">*</span> <span class=\"token number\">100</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token return-type class-name\">GpioPin</span> <span class=\"token function\">InitializeGpioPin</span><span class=\"token punctuation\">(</span><span class=\"token class-name\"><span class=\"token keyword\">int</span></span> bcm<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\"><span class=\"token keyword\">var</span></span> pin <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>GpioPin<span class=\"token punctuation\">)</span>Pi<span class=\"token punctuation\">.</span>Gpio<span class=\"token punctuation\">[</span>bcm<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        pin<span class=\"token punctuation\">.</span>PinMode <span class=\"token operator\">=</span> GpioPinDriveMode<span class=\"token punctuation\">.</span>Output<span class=\"token punctuation\">;</span>\n        pin<span class=\"token punctuation\">.</span><span class=\"token function\">StartSoftPwm</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> _MaxColorValue<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        pin<span class=\"token punctuation\">.</span>SoftPwmValue <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> pin<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">void</span></span> <span class=\"token function\">CheckColorRange</span><span class=\"token punctuation\">(</span><span class=\"token class-name\"><span class=\"token keyword\">int</span></span> color<span class=\"token punctuation\">,</span> <span class=\"token class-name\"><span class=\"token keyword\">string</span></span> paramName<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>color <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span> <span class=\"token operator\">||</span> color <span class=\"token operator\">></span> _MaxColorValue<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token constructor-invocation class-name\">ArgumentException</span><span class=\"token punctuation\">(</span><span class=\"token interpolation-string\"><span class=\"token string\">$\"Color value (</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span><span class=\"token expression language-csharp\">color</span><span class=\"token punctuation\">}</span></span><span class=\"token string\">) out of accepted range (0..</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span><span class=\"token expression language-csharp\">_MaxColorValue</span><span class=\"token punctuation\">}</span></span><span class=\"token string\">).\"</span></span><span class=\"token punctuation\">,</span> paramName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Now we're finally able to process events in our event handler by interpreting the new value of the node as event and acting differently based on the name of the event. This part would naturally be fully dynamic and the sequence processor would work in a proper version of the tapio-IFTTT-Connector which wasn't implemented in two days.</p>\n<div class=\"gatsby-highlight\" data-language=\"csharp\"><pre class=\"language-csharp\"><code class=\"language-csharp\"><span class=\"token keyword\">private</span> <span class=\"token return-type class-name\"><span class=\"token keyword\">void</span></span> <span class=\"token function\">OnProcessEventCommandWrite</span><span class=\"token punctuation\">(</span><span class=\"token class-name\"><span class=\"token keyword\">object</span></span> sender<span class=\"token punctuation\">,</span> <span class=\"token class-name\">ValueWriteEventArgs</span> e<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">{</span>\n    Console<span class=\"token punctuation\">.</span><span class=\"token function\">WriteLine</span><span class=\"token punctuation\">(</span><span class=\"token interpolation-string\"><span class=\"token string\">$\"Command received with arg: </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span><span class=\"token expression language-csharp\">e<span class=\"token punctuation\">?.</span>Value</span><span class=\"token punctuation\">}</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\"><span class=\"token keyword\">var</span></span> eventData <span class=\"token operator\">=</span> JsonConvert<span class=\"token punctuation\">.</span><span class=\"token generic-method\"><span class=\"token function\">DeserializeObject</span><span class=\"token generic class-name\"><span class=\"token punctuation\">&lt;</span>Event<span class=\"token punctuation\">></span></span></span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>Value<span class=\"token punctuation\">.</span><span class=\"token function\">ToString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">try</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">switch</span> <span class=\"token punctuation\">(</span>eventData<span class=\"token punctuation\">?.</span>Name<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">case</span> <span class=\"token string\">\"light_on\"</span><span class=\"token punctuation\">:</span>\n                _LedController<span class=\"token punctuation\">.</span><span class=\"token function\">SetColor</span><span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">,</span> <span class=\"token number\">255</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">case</span> <span class=\"token string\">\"light_off\"</span><span class=\"token punctuation\">:</span>\n                _LedController<span class=\"token punctuation\">.</span><span class=\"token function\">SetColor</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token comment\">// case \"light_sequence\":</span>\n            <span class=\"token comment\">//     _LedController.ProcessSequence(JsonConvert.DeserializeObject&lt;LedSequence>(eventData?.Payload));</span>\n            <span class=\"token comment\">//     break;</span>\n            <span class=\"token keyword\">default</span><span class=\"token punctuation\">:</span>\n                Console<span class=\"token punctuation\">.</span><span class=\"token function\">WriteLine</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Could not detect event type. Ignoring event.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">Exception</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        Console<span class=\"token punctuation\">.</span><span class=\"token function\">WriteLine</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Processing event failed. Ignoring event.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>We're done!</p>\n<p>We're now able to process events coming from IFTTT using just one Azure Function and a OPC UA server! In the <a href=\"/blog/2019/connecting-the-digital-worlds-3\">next article</a> in this series we're looking at the implementation of the reversed route: Forwarding events from a tapio-ready machine to IFTTT.</p>","frontmatter":{"title":"Connecting the digital worlds (2/3)","date":"July 9th, 2019","author":"Simon Eßlinger"},"excerpt":"In the previous article we clarified the idea of the challenge and set up a demo machine. In this article we take on the implementation of…","timeToRead":9}},"pageContext":{"slug":"/blog/2019/connecting-the-digital-worlds-2/"}}}